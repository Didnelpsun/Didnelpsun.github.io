---
layout: post
title: "容器"
date: 2020-04-09 23:30:21 +0800
categories: notes spring senior
tags: spring 高级 
excerpt: "容器"
---

上一节我们已经涉及到了容器的概念，Spring的核心就是实例容器，来帮助我们控制，这一点我们在之前也已经说过了。

之前说到的控制反转的概念（IoC）在上个案例的体现是不使用new来创建对象，而是使用FruitFactory水果工厂的getFruitFactory方法来获取，我们将实例化的职能让渡给了工厂方法，而不是App.java我们自己来创建。所以Spring的功能就是这种代理的集合，可以降低程序耦合，之前说的IoC容器（即四个核心容器）就是案例中我们自定义的Map容器的扩展。

所以IoC最终的目的就是降低耦合。

对于之前的那个水果的案例或者是注册的案例，你都可以使用Spring来替换配置。这些都是不会继续详细演示的，因为如果你学好了前面的部分，是十分简单的。

根据上次的例子：

首先你不会再使用Factory类了，而是使用Spring的xml配置文件来实例化：

```xml
<bean id="appleBean" class="org.didnelpsun.Common.Apple"/>
<bean id="appleBean2" class="org.didnelpsun.Common.Apple"/>
<bean id="bananaBean" class="org.didnelpsun.Common.Banana"/>
<bean id="melonBean" class="org.didnelpsun.Common.Melon"/>
```

Spring容器的反射在xml文件中得到配置。所有的bean标签实例都会包含在beans标签中，而每一个\</bean>标签中的class对应的类，就是我们需要使用到的要反射的类。

```java
//App.java
package org.didnelpsun;
//项目入口

import org.didnelpsun.Common.Apple;
import org.didnelpsun.Common.Banana;
import org.didnelpsun.Common.Melon;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App
{
    private static ApplicationContext context;
    public static void main(String args[]){
        context = new ClassPathXmlApplicationContext("SpringBeans.xml");
        //我们原来一般都是用Apple apple1 = (Apple)context.getBean("appleBean");但是也可以下面这样用
        Apple apple1 = context.getBean("appleBean", Apple.class);
        Apple apple2 = context.getBean("appleBean2", Apple.class);
        Banana banana = context.getBean("bananaBean", Banana.class);
        Melon melon = context.getBean("melonBean", Melon.class);
        System.out.println(apple1);
        System.out.println(apple2);
        System.out.println(banana);
        System.out.println(melon);
    }
}
```

如注释所说，你可以使用<span style="color:yellow">类名 实例名 = context.getBean("xml配置文件中bean的id名", 类名.class);</span>的方式来获得实例。

你会得到下面的打印结果：

![fruit打印结果][fruitresult]

[fruitresult]:data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAV0AAABmCAIAAADnINU6AAAXyUlEQVR4Ae1dzXXjug7We+ft73LGNdxF3EVcxT0uwbvUkF1K8JkqnC6cKpwsbwcPH8AfUOKPLFu2lcCLCUUSIPgRBEF5DPzn77//7sqfv/76q9xoLYaAIfA9EfhffVr//vtvvYO1GgKGwPdD4L/fb0o2I0PAELgQAbMLFwJo5IbAN0TA7MI3XFSbkiFwIQJmFy4E0MgNgW+IgNmFb7ioNiVD4EIEzC5cCKCRGwLfEIHG95T3nfF6+7bt9rv9MYqBqvXp8Pp6OMXKtJShSju0n3gU6XZMx2/TWo/bI3DBel1A2p/nFRSvz3Lsc3ZoNbWuvmWGwzy0XRiKe6MaMgY7GorRvtGQE4ZZbV5eNitHuDj7JVp7rr7mYZq4XgzgF601Hzwk0NtWToEEWQwZxNR7zcsSGn3FI/ylKWzX05ViaXbBacAjIH9fGVhBCY1X50ytt1AD5VndV7zm6Os1uX2Hr83T0+pwKvp+TTYXdFhvXzZkFAJmx/3++Pa8WR3FFc3v9p7+iWX5vIv89an/+r3qju+T9cHeL9ThfdBWWAFS3KDTXQetflBhc2LBLHx8HI7H1eZ5neswex0bpnTjHEmc37/OGHlNZuR0SJmcQT5j1/PmMRRklL+QuFXajtKh9fz5+vr5TJd+5q0dl4Rq0DoUxdX0PLWg7Kpej1KnEgHff5NPJR1TUsWTNlY8OorC4WpBMy4xTKccOWIc9aJEP9YZFgQhnSbX9qN0TCVihPVC7e+Pw68N3T2o0s2Bhaw0sQR5hnzRqqBREB7VbBZeT93peOy2NBn6w58KGpUmoS3+C7jd8odVhjk6vu9OfFeURmDSdThnR37YpB33vTddCquoAOCoxQiLIkPpppQooao0ER+BULNa0c1IBuhRSmXt37Zd4IGIrzismPXLSxff+1HFG81yRxCjjc4x3l6MDnlpTOVZNE80TyUXPsYkCE8i7OgBvEKdFGpUHaTagpZgA21wFFMqPPnbZY99/1ExBJWfMdizY+o9+z5d8VkxTCQsE+BQ+yp4rx7s7HqtN0/0zvbjn5fNyzMt2h4GnXblFw1VaDoyaripZhkW4S0KjwZvFkiZe4YhWa8U3mpTaTiwwG1BNApPssq0/TG03L52+w5aRYD+jnyo79tGHmnyGdUVZ+GPbEdPRzrglC0Vnp7Wxx0NhA+W6GX7KUzRLych9RvdxByZNQwftoknzcgt/Rr/tu4RziYG9qfDn8NpRZfCwDeaPnIMT97e8vWGgOfP8Z1s6ghDDKTP94dbVHFVoQnewcIclAvIRRzDIz6R4ZBqJIt0lMhQS5j2GfnUWC9ePmbFa6KZFpoaDHGB8ZtmtPBsFpy3A/OWghYZDuCtNOmpxHJplUkLTp9fbJ9wDYBS4Jk+bG75oNu5z/5I+zi+4HXMBRcodvIpSUgcwx5iY+ipShJSe6WppfOe++S/bX+BXsYKYm4MPG1wYDlE1LkFOA/SDbUb7yBiFvQSpAfhQGbesrw4g6ZKxTQqNlOrVTgSZIDU9lcGTZrY4tHkSCdecSC9cWu0l0nnGzwU1utsZIOoBYat9Qz0vQLMwNfeUeMw2QRN6fXkRw9vpq3SJL3RobzKrDqf1BPdvkr6ye8jt0rjwVr2bM9ZkDGTf4OEfIDH09S7/TU9LAs/UecTyeoPY+wCSxGUAE+nj1FKRnZW9og6VCripOpX6Zg0TaNiFtG4JxzPfchZRqhBct86l2mtv+ylcCPqd528Xn1G/vm6DMU7CKrBg6z8EeKHVH8VvKqWi5Wm2DW3yuvtqoNBkA8kOh3IfaB3Dse9rw1/efqpwuOkIwcrbIrQt18QCdkodDg1hQIXCdUzJ6FrzjddoPNq2FqxdY8QV47u0I7JavMP+foD96k/BMwpTSl8og/le8JmvPXcMzii7FtQJ4Iyvi3yRNm/E6loDrhdZlmOrZSvBXLvo/lOFdhAO7yzDJ04Z9QcULwqhJBi5OYycb2CpIPCZQwzwgMHrRq7Hf6PmkcnGb8ML78YYNESgsEDNDW3yrJdsUjQs+fP/aGDvnWZL3VY49OhCneIdPSB8MGIJQKVJCRmtaZJOyUVsPrU9hdgsUiV/ck/8uinW5uiYRFypi89iYg3fYW8Fecefji9IPNvgkjD4i4QaTzDClVl7uDfBa8/kbAyFvpRs3ODAEZ4zciHQvQU9T0CarXZOrLj/vXwHOZVkVA39YDinQUxtSR7Jpi0Xnqofvlyhlp4MQtHPUjvKlGAFxSFJgARTG2qG6VV/vxarX91h3jxPfgbsBsnMiQW/pxnqZ2hGN4hsPE3yYp43cC7m6cX33Q60HcYW6/YJQlprErTNJ1n+Uf98596HLdRPDKdsFLqi7nL349mxrhL1WBid5Hi2w5agbfSNAEOGPHf7/6N6QQG35ykdY+YNn0+IDQp7hW995e62cqGwG0RgAeH75W9f7fabEP5tpI85mjte8QUuckB2v9+834Tc/BO/xR2RmMIXB0BuR6FL6RIZd1XaVcfaYkMZ7pHLBEKk9kQMAQcAvPcIwxeQ8AQWDICZheWvHomuyEwDwJmF+bB1bgaAktGwOzCklfPZDcE5kHA7MI8uBpXQ2DJCJhdWPLqmeyGwDwImF2YB1fjaggsGQGzC0tePZPdEJgHAbML8+BqXA2BJSNgdmHJq2eyGwLzIDDP7yOuJGvmJ3SosrwyV8L327BhrZDZnPs7nAtIp8CnhuOfUffjwNV4gjb5kXKtc2ibRvXQdiHM7dYFUq4djcmQ3nrs8eMlAR/O3Q/jh5mpp+wQhBg4Z2/khZm4XgxgCApLAvnIvwmyOoSlGt71Ubg3qahDJdfLkKEarV9sjtUnOPN5aXbBacCZs/yG3XlbERo+9AeCAB2HYbEeduYUn+Vx88qQtYphWoD0y6ZnvhCcpaN8OP532sC5SYWAjaVcLzmGlcVrjlWhHdNk7xfGoPRwfSRImAoxzKGuHk7MskAwCwvJK5MJc82b+PDnPQ36mMw2R4XYsfnPCIZ5Qq7NjFXpPapplL+QOC3a8yNTanllVNCfBCjEWnMHOI4cdTPUjwJhKVFNYQ0RDM3yygR4Cyj5asDtw7z5NUGIxnJeGR3PFT1J51XkOWxiil5KaXG2fojB34RKC5DL9VJjqGlpFCVGGDMZS2pHUAXybKFtF3iI4LBC85M4x1RheWVk+yP+j0+lkwW7UEkQbgngHa05wC7GeQ7kHA4rhBEN1VKorlcheQzOvULTT80ro0w8WQX9CkRyN8BQrHvQu3CFcrdQVFhc6sosSUH6t70iQ08AzaAPVpYL8k9JwjqVYlArtu4RsEXaR+XsIxyVzXON/gPHQOaA+RKRH+4Nfzh+tGvwZLm/AlAftlxPXdei8kcEGVsSyIeYkwQAIZQzB/zFMTziExkOqUaySEeJDLWEaZ+RT431KiSPAfNCU4Ohfik3Wni5RMihDPOWghbRGMBbacrjU1pl0gLEWocgubwyDAflUOPP68fTSwxcLu9xSjpKmyFLlZeOa8sMG4pdGKtBVZFEN7X9BdIYyyujIRuU2eKRlpPWWl6ZATrDCpiBBeWVkWDOFKCU8m7LJnbn93BmqkZTqep+scJQvMI+Qe5ZjzWeKscp1I2xCzxUuHLhyfLKBACpoDx62HAOEwhnLrlvaYJLyxJYvXjfmLxeJbmuy1C8gyT4Z/fQeWViOqqc6JhI9JkVhDguikmsXL8qw+Q4VowzxThWeohnuo6ratkFuFmU+cBlo8Udyb9zqfKH/xadvlxXvgb3AIUj6q/X/vbkriI5Fq5uIhVlHFE5Zyv8K02w9qQTGRl56z55Us4sgHwq1FMm3mVofO/0bw4oWRV6LeFynxIFiYKsKJX10l+ppUPUnioMa2SuLSM8tkKqGrzUDp2EZxleTLeAfMIBN9jcKospF/uK92P7wy9KWwK5huuihqL2neKP2anXyaqF12OEgFWGnOzbWf/qdlASymX5/E2UyE4PLbsg90eaf5LAZAhejy+0SdFwa6oMQpCeRPwiw/LK9LDkxx5Q0OAd1DJZlgBzv6G5XrkhfR3W7TKGWngxC4lAsj2DYaBpvbmxaejE6BaaAMTaiyvUXtlwkueyB52RVwZYJ1L4kfp/EzFGU/W5qOdK8pjKWBUqxbtRnCkeNMROLCnbu8y72IZ4D9c8mNjDSbhogSrwVpomTBn6aHllysC1vo8oU9Za+IDQHfgbjCtdfTRfKxsCkxCAQ2t5ZcrQte8RZdpyC3lvllemDI+1PAACcj2yvDL5pZjpHpEfzGoNAUNgEQjMc49YxNRNSEPAECggYHahAIxVGwI/GAGzCz948W3qhkABAbMLBWCs2hD4wQiYXfjBi29TNwQKCJhdKABj1YbAD0bA7MIPXnybuiFQQMDsQgEYqzYEfjACZhd+8OLb1A2BAgJmFwrAWLUh8IMRmOf3EVcCNPMTOlThd+1JxL10uAxV2qH9xKNIN/+D3TaR9fhmCFxRC66gk1Vwr87/oe1CFYo5G8kY7Ig/oz3nOJfx9rE6mMuC7Jfabw8ruo8LIHFaSOJCyhnOGuEOqWQ9JHBJEmciv9p1KoVV/TQMzBVFqBtJGvqPicuiOj9A0e3YB5DkziLw8hMaPmIIYvYsKK9MNGOYyCBty93B5cjeIborhzqJcfMK24yqG9loctOqUJHJQBQTtk0wH6MCA/Z2CJsdFWkwJ0Kmzt4vZEB5/CoXuSsoLk4n9fD4E4gSjo4iHUnmLlFMKcRn0MOQlIOgIrp9UJ42rZQKJsOvKoJahWDmg9GKFYgO3Z9LsbNqGHWPSFwdbSzJ1ltembB0SfoAwjg9E1X4KhyR/lEg/Gl5ZaIGujj0ahMCnbXroJStAdT1qCBROeVMlLxaAhMSXk2Luqt9FHVDs8lS6Q5JWU+ZGtKxuKcDV2e/SDiUH9p2gUenacgcB+4MVbzBru3ImpGr4yPEMgQ+yYpn4W1fURxP5aJvgi70df5RUieNNSpejC1oCTbQBm8wpcKTv0KGIfMF6uoZgsrPGOwtr0yAN49dqKWleHMPpD1RMQjR9XG323Mb1kvHtlXIJ0sJzbseFcVWxrEtFzOSBEpISS5+B9kx3NtGHnv7m1peNoO8MtKV1MPpIXpFtUnsBYGR38US8ezDZ77jgWh/5XZKEFSchT8ZgxG6lAqte4SzOGHhOPsIy+g50kzcVNjV4WQKllfGozPqb1Su1I8cRZx2aqwXLx9TcK4fTVtoajDUXtE5wmOHyGf/RbtMOwhB1zgPkBZReWDpWIlpQVPyKcGbp6LrQi3lDBF5ycl8USy4mHKGBo2taTYayBPFYMdeQsSzoDUq7sBHDt0H/nibMSZ5jKwcBcQWFuf92/YXLK9MC1E2hZZXpgVToV3CF4do0OrEFYLeJs9zuToVv0z4pMFiZobMyCI70tEONh828dOLZKPJUDrOfbosFXwjxNaPngRL512HPPcOhzexGwXfkMUYu8BShInjyfLKaCTV215Yfssro8E5q8zbuwOGom7YEW0G16WCIYBBkA9O9dOBMtbRO4fj3teGv7UNWrUoxEGpTeA3tEM0OTYK6i1W/6RW1LHo7hBh28aWUaXWPUJcHroMOW6SV6bpnMBYRVcRDldfGlpy+vjLmLTCA8R88ER4RO+yT5w8T6SiOeAKmbA690G+FkjfXAsPvlMFdlAB7zeK9Q9NzUIOKF4V0RhP7+Yycb08l+HfyxjmhO+NMcAw7JezludqVMII6wcVfP7cHzqoIpL29CQnHaUkSwxQv8XnlcmpRq2tBwZJQDskXkDCMC2dv+gOgVHa/gKkIrMdXhNlpAzihgLAUjRcnyNMXRHylfZEJi916Oh9/fjnxb/uIQ2Lm1ik8QwrVEGgYQH8cxlHqGdlLPCh5jfHj0QI75xlEV0DXzWD4wc4KGuXkMEhfA7zCv3rhR5QuKwuM6+Mm2YeQ3GjPbxIA3XaegUo43NdKnq5sFr/6g7e8+u6Q/xfCT3dYPcwHMmJ2mCFgmqwb7Dx8+JXDaGtTMVmh6atsApvKao67+zV1DsEkJ4pHjQm67+J4wXlTWN5ZRgL++ehEYCq/viUM617xLQV5NNNk8q3LGck4tTEVjYEbogAnDt85ezzea4221C+oRj3Hap9j5giH/lXlldmCnBG8wgI4IJK3z/6/6NA2szvkh9BtFvJMNM94lbi2ziGgCEwAwLz3CNmENRYGgKGwM0QMLtwM6htIENgMQiYXVjMUpmghsDNEDC7cDOobSBDYDEImF1YzFKZoIbAzRAwu3AzqG0gQ2AxCJhdWMxSmaCGwM0QMLtwM6htIENgMQiYXVjMUpmghsDNEDC7cDOobSBDYDEIzPP7iCtNf/CrTPczV/xEuhyeKkN1rjxg4SIz4P/KD354fy4/638FBOZZlHm4XmG692Xx0HbhbtAgugENzhbmbkI0B04CPizHfvFOjKZdZjFC/Osviv/xvwRPJbl85N8EWaxDFDesiuuTEzzbpAxQhltgqws9MYZDZQcSDpUmPUSpvDS74JSjNJ2fU89qRmj4+B6I9HNcgmcjv8HHD+8PJwppwr/Al/Bl/WCHMy8mfkutI4JwqJMYz7q+eRH6pCP5/Y+xlay5Jtql52eI4Siy4ZecWHCdfwfPvw6HY7dynm0UodIUO9VL9n6hjs+Dtkq8LxVfnUNdPaiwQ7GOh0NHhoEayCx8ZSKkDUmuXnNJ8hje+oc/75nQq/kmMjLhOjoxQwxCt8W4JqQAFPfo9RAjUQaAKk2hT7Mwyl9I/BltR8kwWV6ZsOBJIgBCPvp9MOAqfJV+FAh/Wl6Zz4+Pp2cKo0zW4et46JITD+j4ighhQ5NLKlqCFwEQpyaPwdanoIuvp27bl6rS1O+qn/WU9f5SfSAwNR1dFQHji6oTFytN/a7l57ZdYJlpLBEJ+Cdp8qjC8sqI/+4c07B2ZdTTFoJwSwBjoQF2dGXTbvGJj40Q6DTWc6m6XuvNk4TN3Lw84wh7pi1IIchx7hWakGCFOhUV4GzhRVw6NH89r1efbBaiXYB6wbkXpceTv/L3Zpk8TpCQgjVz7FS+fZ2XPEZyN2CV14kU9FBpil0ldlnIENNMiuMjR5FVKL9sj+yvU2rdIySwbPT0EGPz5O6EIkG0b+wgITo2ffAHwPOHc5i4BqnJ/yuwnntJblGRSjuW2hXDHFQoXy76kM156UJtZDikGski8OJCZKglTPuMfGqsFy+fjNmP6V1oajDUXtE44UkPkLeFDcM/ZBZER+Jbh7MXZYqENNzE5DHyHiero5WmuHocIS5iTQ20gSK7sGccBTW6NDbDRDWR6fVLbX+hH60eeG5UKg11bmES7j0Jajc+WQh2bnd8D4FzC9OQY7DQWKyeRsWGa7UKsbqEvbNjxbHyDWzxaHI4U3HCvXG3aC/zVPPVYoXiJ6yXrozNY0oFhq31rLMmw0B65I8O6QskJy3KNAlZdc5KHiNbX7yZ3vQqTaEnOzakJ+nBz06SfoGZVUPYknqimjDMFQpj7ALDF5QAT5ZXRkOfs4xY6+S+pQkuLcMx22yK943J61WS6+oMeSCcIjIiAAzh4KPzVBInU3+uhDBA8ZUdnLxRyWPEG4zx3iEJnmgq77/X7iGK55qcFSCVoPcm/emxURiXSgdCfzVP1zj8JaXWPUI85Zh/RV6s9H3QgQTw0gmB8ImOku9KptPyyngwan9zQPGqiJ55UhxXVJ64Xp7L8O9lDIfC8w4eDsP+G/mUE5L9TJFQTDnsK6E4PnmMVmnSbWg1V9HOrzRhtrz9cxliGIpwsrhVzOBDr3m29OIxn6gm1/+yura/QBO2vDKJmYeyO9QJnPCaUZY+LIe+R2A9La9MgKZcAGjnJ/s5X0Xp3jExeUxZ9koLn6bUrjTHv5iR64HXqDSVDnVnYy+cta45O+OGFLZe4RI9TJsqIvaaZooHjRmpL+acvdT/i6Qnx1IeBxNbiuAmZ4IANs+PTx6TIJI+tO4Rae+xTwNnUb6bSd6HjeVl/QyB6yMAD46/GnCsf2TymAqs7XtEhbjYRC6N5ZUpomMNj4CAXD7CF1KksuG/HD+CeHeWYaZ7xJ1nZcMbAobAJQjMc4+4RCKjNQQMgXsjYHbh3itg4xsCj4eA2YXHWxOTyBC4NwJmF+69Aja+IfB4CPwf6t4makLzASQAAAAASUVORK5CYII=

[]
