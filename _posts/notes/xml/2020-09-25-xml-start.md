---
layout: post
title:  "XML入门与语法"
date:   2020-09-25 21:33:53 +0800
categories: notes xml base
tags: xml 基础 XML
excerpt: "XML入门与语法"
---

## XML基本语法

XML即eXtensible Markup Language，即可扩展标记语言。XML主要是用来数据描述，是标记语言而非一种编程语言。通过XML描述的文档结构是树的结构，它一般都用来描述层次性数据结构。

### &emsp;基本要求

1. 每个标记都必须包括开头和结束标记，分为单标记和双标记，单标记只有一个标记，以<开始，以/>结束；双标记开始标记以<开头，并以>结尾；结束标记以<\/开头，以>结尾，开始和结束标记之间就是标记内容。
2. 开始标记以及结束标记中间的内容为元素名称，大小写敏感，且必须开始与结束标记的元素名称一致。
3. 一个XML文档只能有一个根标记，其他的标记必须嵌套于根标记中。所有标签都必须合理嵌套，必须以巢装的方式嵌套。
4. XML标签属性值必须以单引号或者双引号括起来且不能混用。

命名规则：

1. 可以为中文或者英文或者其他符号，但是一些非英语的字符可能会因为某些软件不支持而显示失败。
2. 不可以以XML开头，无论大小写。
3. 名字不能以数字或者标点符号开头。
4. 不能包含空格。
5. 尽量避免使用"-"和"."，因为可能引起混乱。
6. 不要使用”:”,因为XML命名空间需要用到这个十分特殊的字符。

### &emsp;文档组成

基本上是由XML声明、文档类型声明、处理指令、注释、元素构成：

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!--注释-->
<!DOCTYPE didnelpsun SYSTEM "didnelpsun.dtd">
<?xml-stylesheet type="text/css" href="style.css" ?>
<didnelpsun>Didnelpsun</didnelpsun>
```

#### &emsp;&emsp;XML声明

第一行即为XML声明，XML文档都是以一个XML声明开始，且必须在第一行，以<?开始，以?>结尾，其中xml表示这个文档为XML文档，具体<span style="color:aqua">格式：</span>`<?xml version="1.0/1.1" encoding="编码方式" standalone="yes/no"?>`。

+ version：必须包含，表明XML文档遵循哪个规范，这个属性必须放在最前面。
+ encoding：非必要，表明字符编码方式，默认为UTF-8。
+ standalone：非必要，指定该XML我呢当是否和一个外部文档配合使用，yes就表明当前XML文档为一个独立文档，与外部文件无关，默认为yes。

#### &emsp;注释

注释以\<\!--开始，以-->结束。位于其中的数据将被忽略。还有需要注意的是：

1. 注释不能出现在XML声明之前。
2. 注释不能出现在标记之中。
3. 注释可以包围代码和隐藏标记，但是添加注释后必须保证剩余文本必须为一个完整XML文档。
4. --不能在注释中出现。
5. 不能以--->结尾。

#### &emsp;&emsp;文档类型声明

第三行代码为文档类型声明，这里引用了一个外部的DTD文件，该DTD文件与当前XML文件处于同一个文件夹下。

DTD全称为Document Type Definition，XML从SGML中继承了用于定义语法规则的DTD机制，但是DTD本身并不要求遵循XML规则。基本上所有的XML应用都是使用DTD定义的，HTML就有标准的DTD文件用以规范标签与组织结构。DTD文件也是一个文本文件，以.dtd作为扩展名。

#### &emsp;&emsp;处理指令

第四行即为处理指令，这个代码的意思是通知XML引擎，应用CSS文件显示XML文档内容。

处理指令允许文档中包含由应用程序来处理的指令，在XML文档中可能包含一些非XML格式的数据，XNL处理器可能无法处理这些数据，那么就可以通过处理指令调用其他应用程序来处理数据。

同样处理指令以<?开头，以?>结尾。xml-style称为处理指令的目标，它必须标识要用到的应用程序。应用程序从处理指令中取得数据和目标，执行要求动作，如果这个处理指令不被识别，，那么就会被忽略。xml-stylesheet处理指令总是放在XML声明之后，第一个元素之前，其他的处理指令可以放在除标记内部和XML声明之前的任何位置。

<span style="color:orange">注意：</span>XML声明和处理指令并不同，它们之间的处理方式不一样。

#### &emsp;&emsp;元素

最后一行代码即为元素。

&emsp;

## XML元素

标记：是由\<\>所包含的对象，如果是双标签那么会有结束标记和开始标记。

元素：包括开始标记结束标记以及中间的内容，是文件的基本对象。

属性：是元素的附加信息，以属性名="属性值"的形式来出现，在开始标记中定义。

### &emsp;元素的形式

#### &emsp;空元素

即内容为空的元素，即不能包含内容也不能包含子元素，有两种方式：`<元素/>`、`<元素></元素>`。但是只推荐使用单标记作为空元素，因为如果双标记中间如果出现空格，或者是因为格式化出现转行，那么它就不再是一个空元素了。

空元素中可以包含属性，且个数没有限制。

#### &emsp;非空元素

非空元素都是双标记，分为带文本内容的元素和带有子元素的元素以及带有文本内容和子元素的元素，但是最后一种是不推荐使用的。

### &emsp;元素的内容

#### &emsp;&emsp;1.子元素

即元素中嵌套其他元素，且嵌套层数没有限制。

#### &emsp;&emsp;2.字符数据

内容中字符数据可以是不包含任何标记的起始定界符和CDATA段的结束定界符的任意字符串，即字符数据不能有&，\<与]]>。如`<tag>Didnelpsun</tag>`就是合法的。

字符串不能出现上面的不合法字符，如果需要展现就需要使用字符引用和CDATA段两种方式使用。

#### &emsp;&emsp;3.字符引用和实体引用

在字符数据中不能拥有&与\<等字符，因为这些字符会被解释为标记的起始定界符。

在XML中提供了5个预定义的实体引用，分别引用了XML文档中的5个特殊字符，即\<、\>、"、'和&，这5个字符可以通过字符引用来解决。

字符引用和实体引用都是以一个&开头并用一个;结尾，字符引用后面还要加一个#号，然后是所需字符的十进制或者是十六进制编码，实体引用在&后加上字符的助记符。

字符|十进制字符引用|十六进制字符引用|实体引用
:-:|:-----------:|:-------------:|:----:
\<|&\#60;|&\#x3c;|&lt\;
\>|&\#62;|&\#x3e;|&gt\;
"|&\#34;|&\#x22;|&quot\;
'|&\#39;|&\#x27;|&apos\;
\&|&\#38;|&\#26;|&amp\;

#### &emsp;&emsp;4.CDATA段

CDATA段以\<!\[CDATA\[开始，以\]\]\>结束，中间包含的是纯字符树，但是字符数据可以是不包含CDATA段的结束定界符的任意字符串。

CDATA段主要用于需要将整个文本解释为字符数据而不是标记的情况下，其中的内容不被XML处理器解析，所以可以是任意字符串。假如里面是Java代码，里面可以有\<\>&等特殊字符而不会被影响。

#### &emsp;&emsp;5.空白处理

XML规范中空白包括空格、制表符与空行。使用`xml:space`用来保留该元素的空白，接受defalut和preserve两个值：

+ default允许应用程序根据需要处理空白，如果不包含xml:space属性，结果与使用default值相同。
+ preserve让应用程序按原样保留空白，空白可能有含义。

但是很多XML程序不识别这个属性，所以只是建议属性。

#### &emsp;&emsp;6.行尾处理

XML数据一般用行来分隔数据，但是不同计算机系统会采用不同的行分隔符所以很可能会有问题。XML空白字符中，有两个标准ASCII码行尾控制字符，即回车（CR/#xD）与换行（LF/#xA）。回车是将光标移动到当前行的开头，换行是垂直移动到下一行。

+ Windows采用回车换行两个作为行分隔符。
+ Linux与UNIX系统采用换行作为行分隔符。
+ Mac OS下采用回车作为行分隔符。

所以XML处理器在解析前会将所有的回车换行以及回车符都转换为单个的换行符作为行分隔符。

#### &emsp;&emsp;7.语言表示

xml:lang用来指出XML文档中任何元素的内容和属性值所使用的语言。一般这样定义：`<content xml:lang="en">This is English</content>`

&emsp;

## XML相关技术

### &emsp;验证XML语义的相关技术

用于验证XML语义和格式验证。

+ DTD即文档类型定义，是正式规范，可以指定XML中有哪些元素，哪些属性以及元素之间的关系。
+ Schema即XML模式，也被称为XSD，与DTD一样的作用，其本身也是一个XML文档，对命名空间的支持比DTD更好。

### &emsp;生成和解析XML的相关技术

+ DOM：文档对象模型，基于树结构的程序，用于访问和维护HTML与XML文档的应用程序接口，定义了文档结构，但是相关接口太多太复杂。
+ JDOM：Java文档对象模型，是Java程序的一套简单操作XML的API。
+ DOM4J：是一个Java的XML API，类似JDOM，用于读写XML文件的API。

### &emsp;显示XML文档的相关技术

+ CSS：层叠样式表，用来表示HTML、XML样式的计算机语言。
+ XSLT：扩展样式表转换语言，是对XML文档进行转换的语言，是XSL规范的一部分，用于将一种XML文档转换为另一种XML文档或者其他类型的文档，并处理元素属性等。

CSS在客户端控制显示减少相应时间，XSLT在服务端处理文档。
