---
layout: post
title:  "MySQL基础3"
date:   2020-03-05 10:12:45 +0800
categories: notes mysql base
tags: mysql MySQL 基础 数据库 创建 导入 修改 删除 重命名 分页 匹配 正则 视图
excerpt: "基本操作与补充"
---

因为许多基本语法都在[SQL教程]({{ site_url }}/notes/sql)中介绍过，所以后面都将介绍MySQL独特的语法。

## 创建数据库

<span style="color:aqua">格式：</span>`CREATE DATABASE IF NOT EXISTS 数据库名 DEFAULT CHARSET 编码字符集 COLLATE 校对规则;`

如：`CREATE DATABASE IF NOT EXISTS yiibaidb DEFAULT CHARSET utf8 COLLATE utf8_general_ci;`

&emsp;

## 导入数据库数据

首先`USE 数据库名;`然后使用`SOURSE SQL数据文件所在地址;`

&emsp;

## 修改数据库

<span style="color:aqua">格式：</span>`ALTER DATABASE 数据库名 DEFAULT CHARACTER SET 字符集名 DEFAULT COLLATE 校对规则名;`

如果已经选定了默认数据库，就不用写数据库名。

&emsp;

## 删除数据库

<span style="color:aqua">格式：</span>`DROP DATABASE IF EXISTS 数据库名;`

<span style="color:orange">注意：</span>MySQL 安装后，系统会自动创建名为 information_schema 和 mysql 的两个系统数据库，系统数据库存放一些和数据库相关的信息，如果删除了这两个数据库，MySQL 将不能正常工作。

&emsp;

## 重命名表或视图

<span style="color:aqua">格式：</span>`RENAME TABLE 表名/视图名 TO 新表名/新视图名;`


&emsp;

## 分页与限制

在[SQL教程的分页和限制]({% post_url notes/sql/2019-07-10-sql4 %})中我们讲到了使用LIMIT来控制显示的数据。但是在MySQL中如果要控制偏移量并不需要使用OFFSET，<span style="color:aqua">格式：</span>`LIMIT [位置偏移量,] 行数`，偏移量是可选的，如果是LIMIT 3,5就是偏移3条记录选取五个，即从2号到6号。

## 匹配与正则

选项|说明|例子|匹配值示例
:--:|:--|:---|:--------
^|匹配文本的开始字符|'^b' 匹配以字母b开头的字符串|book、big、banana、 bike
$|匹配文本的结束字符|'st$' 匹配以st结尾的字符串|test、resist、persist
.|匹配任何单个字符|'b.t' 匹配任何b和t之间有一个字符|bit、bat、but、bite
\*|匹配零个或多个在它前面的字符|'f*n' 匹配字符n前面有任意个字符f|fn、fan、faan、abcn
+|匹配前面的字符1次或多次|'ba+' 匹配以b开头，后面至少紧跟一个 a|ba、bay、bare、battle
<字符串>|匹配包含指定字符的文本|'fa'|fan、afa、faad
[字符集合]|匹配字符集合中的任何一个字符|'[xz]'匹配 x 或者 z|dizzy、zebra、x-ray、 extra
[^]|匹配不在括号中的任何字符|'[^abc]' 匹配任何不包含 a、b 或c的字符串|desk、fox、f8ke
字符串{n,}|匹配前面的字符串至少n次|b{2} 匹配 2 个或更多的 b|bbb、 bbbb、 bbbbbbb
字符串{n,m}|匹配前面的字符串至少n次，至多m次|b{2,4} 匹配最少2个， 最多4个 b|bbb、 bbbb

&emsp;

## 视图

视图定义中不能引用 TEMPORARY 表（临时表），不能创建 TEMPORARY 视图。

### &emsp;查看

查看视图<span style="color:aqua">格式：</span>`DESCRIBE 视图名;`

DESCRIBE 一般情况下可以简写成 DESC，输入这个命令的执行结果和输入 DESCRIBE 是一样的。

### &emsp;更新

视图是一个虚拟表，实际的数据来自于基本表，所以通过插入、修改和删除操作更新视图中的数据，实质上是在更新视图所引用的基本表的数据。对视图的修改就是对基本表的修改，因此在修改时，要满足基本表的数据定义。

某些视图是可更新的。也就是说，可以使用 UPDATE、DELETE 或 INSERT 等语句更新基本表的内容。对于可更新的视图，视图中的行和基本表的行之间必须具有一对一的关系。

还有一些特定的其他结构，这些结构会使得视图不可更新。更具体地讲，如果视图包含以下结构中的任何一种，它就是不可更新的：

+ 聚合函数 SUM()、MIN()、MAX()、COUNT() 等。
+ DISTINCT 关键字。
+ GROUP BY 子句。
+ HAVING 子句。
+ UNION 或 UNION ALL 运算符。
+ 位于选择列表中的子查询。
+ FROM 子句中的不可更新视图或包含多个表。
+ WHERE 子句中的子查询，引用 FROM 子句中的表。
+ ALGORITHM 选项为 TEMPTABLE（使用临时表总会使视图成为不可更新的）的时候。
